<div id="<%= dom_id(field, :card) %>" class="mb-6 rounded-xl bg-white shadow-sm border border-slate-200">
  <div class="card-body">
    <% if defined?(inline_notice) && inline_notice.present? %>
      <div class="mb-2 rounded-md border border-green-200 bg-green-50 px-3 py-2 text-sm text-green-800"><%= inline_notice %></div>
    <% end %>
    <% if defined?(inline_alert) && inline_alert.present? %>
      <div class="mb-2 rounded-md border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-800"><%= inline_alert %></div>
    <% end %>
    <% if field.errors.any? %>
      <div class="mb-2 rounded-md border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-800">
        <ul class="list-disc pl-5">
          <% field.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
          <% end %>
        </ul>
      </div>
    <% end %>
    <div id="flash_inline_for_<%= field.id %>" class="mb-2 space-y-2"></div>
    <%= form_with model: field, url: field_path(field), method: :patch, data: { turbo_stream: true }, class: "space-y-3" do |f| %>
      <div class="two-col-row">
        <div>
          <%= f.text_field :label, class: 'input w-full', placeholder: 'Question title' %>
        </div>
        <div>
          <%= f.select :field_type,
                Field.field_types.keys.map { |t| [t == 'select' ? 'Select/Combo box' : t.humanize, t] },
                {},
                class: 'input w-full', onchange: 'this.form.requestSubmit()' %>
        </div>
      </div>
      <div class="flex items-center justify-between pt-2">
        <div class="flex items-center gap-2">
          <%= f.check_box :required, class: 'h-4 w-4' %>
          <label class="text-sm text-slate-700">Required</label>
        </div>
        <div class="flex items-center gap-2">
          <%= f.submit 'Update', class: 'btn btn-secondary btn-wide' %>
          <%= link_to 'Delete', field_path(field), data: { turbo_method: :delete, turbo_confirm: 'Delete this question?' }, class: 'btn btn-danger btn-wide' %>
        </div>
      </div>
    <% end %>

    <% if field.type_select? %>
      <div class="mt-4 border-t border-slate-200 pt-4">
        <ul id="options_list_for_<%= field.id %>" class="space-y-1">
          <% field.options.each do |opt| %>
            <%= render 'options/item', opt: opt %>
          <% end %>
        </ul>
        <div class="mt-3" id="new_option_form_for_<%= field.id %>">
          <%= render 'options/new_form', field: field, option: Option.new(field: field) %>
        </div>
      </div>
    <% end %>
  </div>
</div>
